# SWITCH--交换

## 以太网协议帧格式
4部分18字节
<pre>
--------------------------------------------------------------
| des MAC addr | src MAC addr| EtherType |   payload  | FCS  |
| 6bytes       | 6 bytes     | 2 bytes   |46-1500bytes|4bytes|
--------------------------------------------------------------
</pre>
FCS : frame checke sequence(32-bit CRC)
以太网报文使用CRC校验算法。

## 交换机工作机制
基于源MAC地址学习，基于目的MAC地址转发，防止环路。

### 地址学习
根据接收到的以太网数据帧的源MAC地址，生成MAC地址表。

MAC地址表组成：MAC地址，接口，类型，VLAN-ID 

1.接口
指的是学习到该MAC地址的接口编号，一个接口可以学习到多个MAC地址。

2.类型
用来表示MAC地址表条目的类型，分三种，动态(dynamic)，静态(static)，黑洞(blackhole)
--动态表示该MAC地址表条目是交换机根据收到的以太网帧的源MAC地址自主学习产生，默认老化时间300秒。
--静态表示该MAC地址条目是手动配置，不可老化。
--黑洞表示该MAC地址条目是手动配置的，用来过滤以某MAC地址为源和目的数据帧，不可老化。  


### 帧的转发
根据收到的以太网数据帧的目的MAC地址，进行数据转发，转发有三种
方式，flooding/forwarding/discarding

1.flooding(泛洪)
将一个接口收到的以太网数据帧，发送到所有其他的接口，叫做泛洪。

当收到的以太网的目的MAC地址是广播/组播/未知单播时，会进行泛洪。
未知单播的指，本地MAC地址表中没有目的MAC地址的表项。

2.forwarding(转发)
当接收到的以太网数据帧的目的MAC地址在本地MAC地址表中存在时，
根据MAC地址表进行数据帧转发到对应接口。

3.discarding(丢弃)
默认情况下，交换即不会丢弃以太网帧，一般是认为控制丢弃以太网帧。

### 防止环路


## 交换机端口安全

